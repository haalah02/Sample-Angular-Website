{"ast":null,"code":"import { Validators, FormGroup, FormControl, ReactiveFormsModule } from \"@angular/forms\";\nimport { RouterLink } from \"@angular/router\";\nimport { NgIf } from \"@angular/common\";\nimport { ListErrorsComponent } from \"../../shared/list-errors.component\";\nimport { takeUntil } from \"rxjs/operators\";\nimport { Subject } from \"rxjs\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"../services/user.service\";\nimport * as i3 from \"@angular/forms\";\nconst _c0 = function () {\n  return [\"/login\"];\n};\nfunction AuthComponent_a_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"a\", 14);\n    i0.ɵɵtext(1, \"Have an account?\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction0(1, _c0));\n  }\n}\nconst _c1 = function () {\n  return [\"/register\"];\n};\nfunction AuthComponent_a_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"a\", 14);\n    i0.ɵɵtext(1, \"Need an account?\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction0(1, _c1));\n  }\n}\nfunction AuthComponent_input_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"input\", 15);\n  }\n}\nexport class AuthComponent {\n  constructor(route, router, userService) {\n    this.route = route;\n    this.router = router;\n    this.userService = userService;\n    this.authType = \"\";\n    this.title = \"\";\n    this.errors = {\n      errors: {}\n    };\n    this.isSubmitting = false;\n    this.destroy$ = new Subject();\n    // use FormBuilder to create a form group\n    this.authForm = new FormGroup({\n      email: new FormControl(\"\", {\n        validators: [Validators.required],\n        nonNullable: true\n      }),\n      password: new FormControl(\"\", {\n        validators: [Validators.required],\n        nonNullable: true\n      })\n    });\n  }\n  ngOnInit() {\n    this.authType = this.route.snapshot.url.at(-1).path;\n    this.title = this.authType === \"login\" ? \"Sign in\" : \"Sign up\";\n    if (this.authType === \"register\") {\n      this.authForm.addControl(\"username\", new FormControl(\"\", {\n        validators: [Validators.required],\n        nonNullable: true\n      }));\n    }\n  }\n  ngOnDestroy() {\n    this.destroy$.next();\n    this.destroy$.complete();\n  }\n  submitForm() {\n    this.isSubmitting = true;\n    this.errors = {\n      errors: {}\n    };\n    let observable = this.authType === \"login\" ? this.userService.login(this.authForm.value) : this.userService.register(this.authForm.value);\n    observable.pipe(takeUntil(this.destroy$)).subscribe({\n      next: () => void this.router.navigate([\"/\"]),\n      error: err => {\n        this.errors = err;\n        this.isSubmitting = false;\n      }\n    });\n  }\n}\nAuthComponent.ɵfac = function AuthComponent_Factory(t) {\n  return new (t || AuthComponent)(i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i2.UserService));\n};\nAuthComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: AuthComponent,\n  selectors: [[\"app-auth-page\"]],\n  standalone: true,\n  features: [i0.ɵɵStandaloneFeature],\n  decls: 20,\n  vars: 9,\n  consts: [[1, \"auth-page\"], [1, \"container\", \"page\"], [1, \"row\"], [1, \"col-md-6\", \"offset-md-3\", \"col-xs-12\"], [1, \"text-xs-center\"], [3, \"routerLink\", 4, \"ngIf\"], [3, \"errors\"], [3, \"formGroup\", \"ngSubmit\"], [3, \"disabled\"], [1, \"form-group\"], [\"formControlName\", \"username\", \"placeholder\", \"Username\", \"class\", \"form-control form-control-lg\", \"type\", \"text\", 4, \"ngIf\"], [\"formControlName\", \"email\", \"placeholder\", \"Email\", \"type\", \"text\", 1, \"form-control\", \"form-control-lg\"], [\"formControlName\", \"password\", \"placeholder\", \"Password\", \"type\", \"password\", 1, \"form-control\", \"form-control-lg\"], [\"type\", \"submit\", 1, \"btn\", \"btn-lg\", \"btn-primary\", \"pull-xs-right\", 3, \"disabled\"], [3, \"routerLink\"], [\"formControlName\", \"username\", \"placeholder\", \"Username\", \"type\", \"text\", 1, \"form-control\", \"form-control-lg\"]],\n  template: function AuthComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"div\", 3)(4, \"h1\", 4);\n      i0.ɵɵtext(5);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(6, \"p\", 4);\n      i0.ɵɵtemplate(7, AuthComponent_a_7_Template, 2, 2, \"a\", 5);\n      i0.ɵɵtemplate(8, AuthComponent_a_8_Template, 2, 2, \"a\", 5);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(9, \"app-list-errors\", 6);\n      i0.ɵɵelementStart(10, \"form\", 7);\n      i0.ɵɵlistener(\"ngSubmit\", function AuthComponent_Template_form_ngSubmit_10_listener() {\n        return ctx.submitForm();\n      });\n      i0.ɵɵelementStart(11, \"fieldset\", 8)(12, \"fieldset\", 9);\n      i0.ɵɵtemplate(13, AuthComponent_input_13_Template, 1, 0, \"input\", 10);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(14, \"fieldset\", 9);\n      i0.ɵɵelement(15, \"input\", 11);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(16, \"fieldset\", 9);\n      i0.ɵɵelement(17, \"input\", 12);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(18, \"button\", 13);\n      i0.ɵɵtext(19);\n      i0.ɵɵelementEnd()()()()()()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(5);\n      i0.ɵɵtextInterpolate(ctx.title);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", ctx.authType === \"register\");\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.authType === \"login\");\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"errors\", ctx.errors);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"formGroup\", ctx.authForm);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"disabled\", ctx.isSubmitting);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", ctx.authType === \"register\");\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"disabled\", !ctx.authForm.valid);\n      i0.ɵɵadvance(1);\n      i0.ɵɵtextInterpolate1(\" \", ctx.title, \" \");\n    }\n  },\n  dependencies: [RouterLink, NgIf, ListErrorsComponent, ReactiveFormsModule, i3.ɵNgNoValidate, i3.DefaultValueAccessor, i3.NgControlStatus, i3.NgControlStatusGroup, i3.FormGroupDirective, i3.FormControlName],\n  encapsulation: 2\n});","map":{"version":3,"mappings":"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","names":["Validators","FormGroup","FormControl","ReactiveFormsModule","RouterLink","NgIf","ListErrorsComponent","takeUntil","Subject","i0","AuthComponent","constructor","route","router","userService","errors","authForm","email","validators","required","nonNullable","password","ngOnInit","authType","snapshot","url","at","path","title","addControl","ngOnDestroy","destroy$","next","complete","submitForm","isSubmitting","observable","login","value","register","pipe","subscribe","navigate","error","err","selectors","standalone","features","decls","vars","consts","template","ctx","encapsulation"],"sourceRoot":"","sources":["/Users/haalahibrahim/Desktop/Sample-Angular-Website/src/app/core/auth/auth.component.ts","/Users/haalahibrahim/Desktop/Sample-Angular-Website/src/app/core/auth/auth.component.html"],"sourcesContent":["import { Component, OnDestroy, OnInit } from \"@angular/core\";\nimport {\n  Validators,\n  FormGroup,\n  FormControl,\n  ReactiveFormsModule,\n} from \"@angular/forms\";\nimport { ActivatedRoute, Router, RouterLink } from \"@angular/router\";\nimport { NgIf } from \"@angular/common\";\nimport { ListErrorsComponent } from \"../../shared/list-errors.component\";\nimport { Errors } from \"../models/errors.model\";\nimport { UserService } from \"../services/user.service\";\nimport { takeUntil } from \"rxjs/operators\";\nimport { Subject } from \"rxjs\";\n\ninterface AuthForm {\n  email: FormControl<string>;\n  password: FormControl<string>;\n  username?: FormControl<string>;\n}\n\n@Component({\n  selector: \"app-auth-page\",\n  templateUrl: \"./auth.component.html\",\n  imports: [RouterLink, NgIf, ListErrorsComponent, ReactiveFormsModule],\n  standalone: true,\n})\nexport class AuthComponent implements OnInit, OnDestroy {\n  authType = \"\";\n  title = \"\";\n  errors: Errors = { errors: {} };\n  isSubmitting = false;\n  authForm: FormGroup<AuthForm>;\n  destroy$ = new Subject<void>();\n\n  constructor(\n    private readonly route: ActivatedRoute,\n    private readonly router: Router,\n    private readonly userService: UserService\n  ) {\n    // use FormBuilder to create a form group\n    this.authForm = new FormGroup<AuthForm>({\n      email: new FormControl(\"\", {\n        validators: [Validators.required],\n        nonNullable: true,\n      }),\n      password: new FormControl(\"\", {\n        validators: [Validators.required],\n        nonNullable: true,\n      }),\n    });\n  }\n\n  ngOnInit(): void {\n    this.authType = this.route.snapshot.url.at(-1)!.path;\n    this.title = this.authType === \"login\" ? \"Sign in\" : \"Sign up\";\n    if (this.authType === \"register\") {\n      this.authForm.addControl(\n        \"username\",\n        new FormControl(\"\", {\n          validators: [Validators.required],\n          nonNullable: true,\n        })\n      );\n    }\n  }\n\n  ngOnDestroy() {\n    this.destroy$.next();\n    this.destroy$.complete();\n  }\n\n  submitForm(): void {\n    this.isSubmitting = true;\n    this.errors = { errors: {} };\n\n    let observable =\n      this.authType === \"login\"\n        ? this.userService.login(\n            this.authForm.value as { email: string; password: string }\n          )\n        : this.userService.register(\n            this.authForm.value as {\n              email: string;\n              password: string;\n              username: string;\n            }\n          );\n\n    observable.pipe(takeUntil(this.destroy$)).subscribe({\n      next: () => void this.router.navigate([\"/\"]),\n      error: (err) => {\n        this.errors = err;\n        this.isSubmitting = false;\n      },\n    });\n  }\n}\n","<div class=\"auth-page\">\n  <div class=\"container page\">\n    <div class=\"row\">\n      <div class=\"col-md-6 offset-md-3 col-xs-12\">\n        <h1 class=\"text-xs-center\">{{ title }}</h1>\n        <p class=\"text-xs-center\">\n          <a *ngIf=\"authType === 'register'\" [routerLink]=\"['/login']\"\n            >Have an account?</a\n          >\n          <a *ngIf=\"authType === 'login'\" [routerLink]=\"['/register']\"\n            >Need an account?</a\n          >\n        </p>\n        <app-list-errors [errors]=\"errors\"></app-list-errors>\n        <form [formGroup]=\"authForm\" (ngSubmit)=\"submitForm()\">\n          <fieldset [disabled]=\"isSubmitting\">\n            <fieldset class=\"form-group\">\n              <input\n                *ngIf=\"authType === 'register'\"\n                formControlName=\"username\"\n                placeholder=\"Username\"\n                class=\"form-control form-control-lg\"\n                type=\"text\"\n              />\n            </fieldset>\n            <fieldset class=\"form-group\">\n              <input\n                formControlName=\"email\"\n                placeholder=\"Email\"\n                class=\"form-control form-control-lg\"\n                type=\"text\"\n              />\n            </fieldset>\n            <fieldset class=\"form-group\">\n              <input\n                formControlName=\"password\"\n                placeholder=\"Password\"\n                class=\"form-control form-control-lg\"\n                type=\"password\"\n              />\n            </fieldset>\n            <button\n              class=\"btn btn-lg btn-primary pull-xs-right\"\n              [disabled]=\"!authForm.valid\"\n              type=\"submit\"\n            >\n              {{ title }}\n            </button>\n          </fieldset>\n        </form>\n      </div>\n    </div>\n  </div>\n</div>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}